#############################################################
# ✅ PROGRAM-7: HOSTING STATIC WEBSITE ON EC2 (Using Ubuntu)
#############################################################

# STEP 1: Create Networking Components (AWS Console - GUI)
# -------------------------------------------
# ➤ Create VPC        → CIDR: 10.0.0.0/16 → Name: my-vpc
# ➤ Create IGW        → Name: my-igw → Attach to my-vpc
# ➤ Create Subnet     → Name: my-subnet → CIDR: 10.0.1.0/24
# ➤ Create Route Table → Name: my-rt → Attach to my-vpc
# ➤ Edit Routes       → Destination: 0.0.0.0/0 → Target: my-igw
# ➤ Associate Subnet  → my-subnet with my-rt

# STEP 2: Launch EC2 Instance (Ubuntu)
# -------------------------------------------
# ➤ AMI: Ubuntu Server 22.04
# ➤ Instance Type: t2.micro
# ➤ Key Pair: Create/Select and download your-key.pem
# ➤ Network: Select my-vpc, my-subnet, Enable Auto-assign Public IP
# ➤ Security Group:
#     - SSH    → Port 22 → Anywhere (0.0.0.0/0)
#     - HTTP   → Port 80 → Anywhere
#     - HTTPS  → Port 443 → Anywhere
# ➤ Launch Instance

# STEP 3: Connect to EC2 from Terminal (on your PC)
# -------------------------------------------
chmod 400 your-key.pem
ssh -i your-key.pem ubuntu@<your-public-ip>

# STEP 4: Install Apache and Host Static HTML
# -------------------------------------------
sudo apt-get update
sudo apt-get install apache2 -y

# Create a simple HTML page
echo "<!DOCTYPE html>
<html>
<head>
  <title>My EC2 Site</title>
</head>
<body>
  <h1>Welcome to EC2 Static Website</h1>
  <p>Served from Apache on Ubuntu!</p>
</body>
</html>" | sudo tee /var/www/html/index.html

# Enable and start Apache
sudo systemctl enable apache2
sudo systemctl start apache2
sudo systemctl status apache2

# ➤ Open browser → http://<your-public-ip> → Page should be visible 🎉

#############################################################
# ✅ BONUS: HOSTING STATIC WEBSITE USING S3
#############################################################

# STEP 1: Create an S3 Bucket (AWS Console)
# -------------------------------------------
# ➤ Go to S3 → Create Bucket
# ➤ Name: unique-name (e.g., my-html-site-786)
# ➤ Block Public Access: UNCHECK “Block all public access”
# ➤ Create

# STEP 2: Upload Files (AWS Console)
# -------------------------------------------
# ➤ Prepare index.html (static HTML file)
# ➤ Go to bucket → Upload → Add Files → Upload

# STEP 3: Enable Static Website Hosting
# -------------------------------------------
# ➤ Go to Bucket → Properties → Static Website Hosting → Edit
# ➤ Enable
# ➤ Index document: index.html
# ➤ Save

# STEP 4: Set Bucket Policy for Public Access
# -------------------------------------------
# Go to: Bucket → Permissions → Bucket Policy → Paste below:

# Replace 'your-bucket-name' with actual name
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Sid": "PublicReadForWebsite",
      "Effect": "Allow",
      "Principal": "*",
      "Action": "s3:GetObject",
      "Resource": "arn:aws:s3:::your-bucket-name/*"
    }
  ]
}

# ➤ Save Policy

# STEP 5: Access Website
# -------------------------------------------
# ➤ Go to: Properties → Static Website Hosting → Copy Website URL
# ➤ Paste in browser → Website visible 🎉

# 🔗 Reference video for EC2: https://www.youtube.com/watch?v=Islmm-LMu38
# 🔗 Reference video for S3 : https://www.youtube.com/watch?v=sI6N0fo0nYQ
